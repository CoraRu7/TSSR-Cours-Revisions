# **Fiche de révision – Serveur de fichiers selon le schéma AGDLP**
<details>
<summary>

## **Objectif**
</summary>

Mettre en place un contrôle d’accès basé sur les rôles (RBAC) via Active Directory et configurer des partages de fichiers avec droits NTFS selon le modèle AGDLP.

---
</details>
<details>
<summary>

## **Concepts clés**
</summary>

### **1. Méthode AGDLP**

* Abréviation de **Account – Global – Domain Local – Permission** :

  * **A (Account)** : comptes utilisateurs ou ordinateurs.
  * **G (Global)** : groupes globaux représentant des rôles ou fonctions.
  * **DL (Domain Local)** : groupes locaux de domaine pour gérer les accès aux ressources.
  * **P (Permission)** : droits NTFS appliqués aux ressources.

**Principe :**

1. Ajouter les comptes utilisateurs aux **groupes globaux**.
2. Ajouter les groupes globaux aux **groupes locaux de domaine**.
3. Affecter les permissions NTFS sur les ressources aux groupes locaux de domaine.

---

### **2. Active Directory (AD)**

* Annuaire centralisé pour gérer utilisateurs, groupes, ordinateurs, dossiers et imprimantes.

* Trois types d’objets principaux :

  1. **Ressources** (imprimantes, dossiers partagés)
  2. **Services** (ex : messagerie)
  3. **Utilisateurs** (comptes et groupes)

* Types de groupes :

  * **Groupes locaux** : sur les ressources, contiennent utilisateurs du domaine.
  * **Groupes globaux** : attribuent des droits spécifiques aux ressources du domaine.
  * **Groupes universels** : incluent utilisateurs et groupes d’autres domaines.

* **Groupes de sécurité** : contrôle d’accès aux ressources.

* **Groupes de distribution** : listes pour messagerie, ex : Exchange.

---

### **3. Partages de fichiers**

* Le partage **SMB \- Rapide,** comme son nom l'indique, permet un partage rapide sur le réseau avec la méthode SMB.  
* Le partage **SMB \- Avancé** consiste à créer un partage dans un contexte plus poussé que le partage précédent.  
* Le partage **SMB \- Application,** on l'utilise en général pour les bases de données, ou encore pour l'Hyper-V.  
* Le partage **NFS \- Rapide,** a la même fonctionnalité que SMB \- Rapide, mais le partage se fait avec NFS.  
* Et le partage **NFS \- Avancé** a la même fonctionnalité que SMB \- Avancé, mais avec NFS.

---

### **4. NTFS et sécurité**

* Permet de configurer **droits d’accès précis** sur les dossiers.
* Utilisé conjointement avec AGDLP pour appliquer les permissions correctes.
* Droits usuels :

  * Lecture et exécution
  * Modification
  * Contrôle total

---
</details>
<details>
<summary>

## **Méthodes et procédures**
</summary>

### **1. Création d’un nouveau partage de dossier**

1. `Gestionnaire de serveur` → `Services de fichiers et de stockage` → `Partages` → clic droit → `Nouveau partage`.
2. Choisir le type de partage (ex : **SMB – Rapide**) → `Suivant`.
3. Définir le chemin du dossier → `Parcourir` → créer/nommer le dossier → `Sélectionner un dossier`.
4. Nommer le partage → définir le chemin d’accès distant si nécessaire → `Suivant`.
5. Activer **énumération basée sur l’accès** → `Suivant`.
6. Personnaliser les autorisations si nécessaire → vérifier héritage → `OK`.
7. Vérifier le récapitulatif → `Créer` → `Fermer`.
8. Vérifier dans `Partages` que le dossier est bien créé.

---

### **2. Création d’unités d’organisation et de groupes**

1. `Gestionnaire de serveur` → `Outils` → `Utilisateurs et ordinateurs Active Directory`.
2. Clic droit sur le domaine → `Nouveau` → `Unité d’organisation` → nommer → `OK`.
3. Créer les **groupes locaux de domaine** (ex : modification ou lecture/exécution) → `Nouveau` → `Groupe` → étendue : Domaine local → `OK`.
4. Créer les **groupes globaux** pour les utilisateurs (ex : Programmeur, Tech).
5. Ajouter les groupes globaux comme membres des **groupes locaux de domaine** correspondants.

---

### **3. Configuration des droits NTFS sur les dossiers**

1. Dans `Partages`, clic droit sur le dossier → `Ouvrir le partage` → sélection du sous-dossier (ex : Programmeur Modif).
2. Propriétés → onglet `Sécurité` → `Avancé` → `Ajouter`.
3. Sélectionner un principal → nom du groupe local de domaine correspondant → `OK`.
4. Attribuer le droit adéquat :

   * Modification → Programmeur Modif
   * Lecture et exécution → Tech Lecture
5. Appliquer les modifications → `OK`.
6. Vérifier dans l’onglet Sécurité que les permissions sont bien appliquées.

---
</details>
<details>
<summary>

## **Résumé pratique**
</summary>

* **AGDLP** : organiser les comptes → groupes globaux → groupes locaux → permissions.
* **Active Directory** : gestion centralisée des utilisateurs, groupes et ressources.
* **Partages de fichiers** : SMB/NFS avec contrôle de l’accès.
* **NTFS** : applique les permissions aux dossiers partagés.
* **Sécurité efficace** : combiner AD + AGDLP + NTFS pour une gestion des droits centralisée et hiérarchisée.

---
</details>