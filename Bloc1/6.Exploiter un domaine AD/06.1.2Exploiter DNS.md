## ğŸ“˜ Fiche â€” Exploiter le DNS


### ğŸ¯ Objectif
ConnaÃ®tre les **zones DNS**, les **types dâ€™enregistrements**, les **redirecteurs**, et savoir **manipuler** (crÃ©er/modifier/transfÃ©rer/signer/auditer) des enregistrements DNS dans un serveur Windows DNS, conformÃ©ment au chapitre.

---
<details>
<summary>

## ğŸ§  Concepts clÃ©s
</summary>

- **DNS (Domain Name System)** : service distribuÃ© qui associe noms dâ€™hÃ´tes / domaines â†” adresses IP (rÃ©solution directe et inverse).  
- **Zone DNS** : espace de noms hÃ©bergÃ© par un serveur DNS ; contient des enregistrements (A, AAAA, MX, PTR, etc.).  
- **Zone directe** : nom â†’ IP (A / AAAA).  
- **Zone inversÃ©e** : IP â†’ nom (PTR).  
- **Zone primaire (primaire)** : source dâ€™information autoritaire, stockÃ©e localement (fichier `%windir%\System32\Dns\nom_zone.dns`) ou intÃ©grÃ©e AD.  
- **Zone secondaire** : copie en lecture seule dâ€™une zone primaire (rÃ©plication via transfert de zone).  
- **Zone stub** : copie minimale (NS, SOA, A) permettant dâ€™identifier serveurs faisant autoritÃ©.  
- **Transfert de zone** : mÃ©canisme qui alimente les zones secondaires Ã  partir de la primaire. Ã€ restreindre aux serveurs autorisÃ©s.  
- **Redirecteur (forwarder)** : serveur DNS vers lequel on redirige les requÃªtes que le serveur local ne peut rÃ©soudre (ex. public : 8.8.8.8).  
- **DNSSEC** : signatures numÃ©riques pour garantir lâ€™intÃ©gritÃ©/authenticitÃ© des enregistrements DNS.  
- **Audit / dÃ©bogage DNS** : journalisation des Ã©vÃ©nements et paquets DNS (DNS.log, Observateur dâ€™Ã©vÃ©nements).

---
</details>
<details>
<summary>

## ğŸ§© Types dâ€™enregistrements (table extraite du cours)
</summary>

| Type | RÃ´le |
|---|---|
| **A** | Nom â†’ adresse IPv4 |
| **AAAA** | Nom â†’ adresse IPv6 |
| **CNAME** | Alias / pseudonyme dâ€™un nom canonique |
| **MX** | Indique serveurs de messagerie |
| **NS** | Indique serveurs de noms autoritaires |
| **SOA** | Start Of Authority â€” mÃ©tadonnÃ©es dâ€™une zone |
| **PTR** | Reverse (IP â†’ nom) dans zone inversÃ©e |
| **SRV** | Indique services offerts (ex. LDAP, AD) |
| **TXT** | DonnÃ©es textuelles (divers usages) |
| **NAPTR, HINFO, LOC, SSHFP, TLSA, CAA, DNSKEY, DS, ...** | Enregistrements spÃ©cialisÃ©s (listÃ©s dans le cours) |

> Le cours liste aussi des enregistrements spÃ©cialisÃ©s (NAPTR, HINFO, LOC, SSHFP, TLSA, CAA, DNSKEY, DS, WKS, RP, DNAME).

---
</details>
<details>
<summary>

## âš™ï¸ Commandes & tests (mentionnÃ©s dans le cours)
</summary>

- **nslookup `<nom>`** â€” tester la rÃ©solution dâ€™un nom.  
- **nslookup `<ip>`** â€” test rDNS (reverse lookup).  
- **ping `<nom>`** â€” tester connectivitÃ© (exemples dans la vidÃ©o ; firewall ICMP possible).  
- **DNS Manager** (GUI) â€” `Outils` â†’ `DNS` dans le Gestionnaire de serveur (utilisÃ© pour crÃ©er zones, enregistrements, signer, configurer transferts, redirecteurs, audits).  
- VÃ©rifier SOA / enregistrements via GUI (onglet SOA dans gestionnaire DNS).

---
</details>
<details>
<summary>

## ğŸ› ï¸ ProcÃ©dures / MÃ©thodes (Ã©tapes extraites du cours)
</summary

### A â€” Manipuler un enregistrement DNS (Windows GUI)
1. Ouvrir **Gestionnaire de serveur** â†’ **Outils** â†’ **DNS**.  
2. Dans **Forward Lookup Zones**, sÃ©lectionner la zone concernÃ©e.  
3. Clic droit â†’ choisir **Nouvel hÃ´te (A ou AAAA)** ou **Nouvel alias (CNAME)** selon le besoin.  
4. Remplir le nom, lâ€™adresse IP (ou pointer vers un FQDN pour CNAME) â†’ **OK**.  
5. Actualiser la console et tester (`nslookup`, `ping`).

### B â€” CrÃ©er une zone (rÃ©sumÃ© conceptuel du cours)
- Via **DNS Manager** : `Forward Lookup Zones` â†’ **New Zoneâ€¦** â†’ choisir Primary / ADintegrated selon besoin â†’ nommer la zone â†’ configurer rÃ©plication (si AD-integrated).

### C â€” Configurer un transfert de zone (pour redondance)
1. Dans **DNS Manager**, clic droit sur la zone â†’ **PropriÃ©tÃ©s** â†’ onglet **Transferts de zone**.  
2. Restreindre transferts : autoriser uniquement les adresses IP des serveurs de noms connus (sÃ©curitÃ©).  
3. Sâ€™assurer que les serveurs secondaires sont renseignÃ©s en **Servers** (NS).

### D â€” Configurer redirecteurs DNS
1. **DNS Manager** â†’ clic droit sur le serveur DNS â†’ **PropriÃ©tÃ©s** â†’ onglet **Redirecteurs**.  
2. Ajouter IP(s) des redirecteurs publics ou internes (ex. 8.8.8.8).  
3. Appliquer â€” le serveur enverra les requÃªtes non rÃ©solues aux redirecteurs.

### E â€” Auditer / Activer le dÃ©bogage DNS (extrait du cours)
1. DNS Manager â†’ clic droit sur le serveur â†’ **PropriÃ©tÃ©s** â†’ onglet **Enregistrement de dÃ©bogage**.  
2. Choisir paquets Ã  journaliser (entrants/sortants, UDP/TCP, demandes/rÃ©ponses, mises Ã  jour). Les logs sâ€™Ã©crivent dans `C:\Windows\System32\Dns\DNS.log`.  
3. Activer **Enregistrement des Ã©vÃ©nements** (erreurs / avertissements / tous) â†’ consulter dans **Observateur dâ€™Ã©vÃ©nements â†’ Journaux des applications et services â†’ DNS Server**.

### F â€” Signer une zone avec DNSSEC (procÃ©dure rÃ©sumÃ©e)
1. Dans **DNS Manager**, clic droit sur la zone â†’ **DNSSEC** â†’ **Signer la zone**.  
2. Suivre lâ€™assistant (choix par dÃ©faut ou personnalisÃ© pour algorithme/longueur de clÃ©).  
3. Valider ; la zone devient signÃ©e (icÃ´ne/cadenas visible aprÃ¨s actualisation).  
4. Pour forcer les clients Ã  utiliser DNSSEC, crÃ©er une **GPO** (Configuration ordinateur â†’ ParamÃ¨tres Windows â†’ StratÃ©gie de rÃ©solution de noms) et appliquer la rÃ¨gle DNSSEC, puis `gpupdate /force` sur clients/serveurs (procÃ©dÃ© dÃ©crit dans la vidÃ©o du cours).

---
</details>
<details>
<summary>

## ğŸ”’ StratÃ©gies de sÃ©curitÃ© & bonnes pratiques (extraits du cours)
</summary>

- **Limiter les transferts de zone** : autoriser seulement les serveurs de noms connus pour Ã©viter exposition de la zone.  
- **Activer DNSSEC** sur les zones pertinentes pour garantir intÃ©gritÃ©/authenticitÃ© des enregistrements.  
- **Auditer et journaliser** (Ã©vÃ©nements + dÃ©bogage) pour dÃ©tection dâ€™anomalies ou dâ€™attaques.  
- **ContrÃ´ler les droits dâ€™accÃ¨s** (RBAC) : comptes distincts pour administration DNS / opÃ©rateur DNS ; activer audit des modifications.  
- **Garder des copies / sauvegardes** des zones et des logs (DNS.log) pour restauration/dÃ©bogage.

---
</details>
<details>
<summary>

## âš ï¸ Points de vigilance (tels que prÃ©sentÃ©s)
</summary>

- Les **transferts de zone ouverts** exposent la zone : restreindre aux serveurs autorisÃ©s.  
- **ICMP / firewall** : ping peut Ã©chouer Ã  cause du firewall (ex. tests dans la vidÃ©o).  
- **DNS intÃ©grÃ© AD** : zones intÃ©grÃ©es Ã  AD sont disponibles uniquement sur contrÃ´leurs de domaine avec rÃ´le DNS.  
- **Mises Ã  jour dynamiques** (DDNS) : surveiller qui peut mettre Ã  jour les enregistrements.  
- **DNS public vs DNS local** : si pas de redirecteurs configurÃ©s, clients utilisant uniquement le DNS local ne pourront pas rÃ©soudre les noms publics Internet.

---
</details>
<details>
<summary>

## âœ… RÃ©sumÃ© (1 phrase)
</summary>

Les **zones DNS** (directes/inverses, primaire/secondaire/stub), les **enregistrements** (A, AAAA, PTR, CNAME, MX, SOA, SRV, TXT...) et les **redirecteurs** sont au cÅ“ur de lâ€™exploitation DNS ; maÃ®triser leur crÃ©ation, transfert, audit et sÃ©curisation (DNSSEC, contrÃ´le des transferts, journalisation) est indispensable pour une infrastructure DNS fiable.

---
</details>