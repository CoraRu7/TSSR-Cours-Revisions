# **Fiche de révision – Configuration d’un serveur de fichiers**

<details>
<summary>

## **Objectif**
</summary>

Savoir configurer un serveur de fichiers sur Windows Server, créer des volumes et pools de stockage, appliquer un système de fichiers ReFS, et gérer les accès centralisés.

---
</details>
<details>
<summary>

## **Concepts clés**
</summary>

### **1. Pourquoi utiliser un serveur de fichiers ?**

* Centralise le stockage et réduit la dépendance aux disques locaux des postes clients.
* Permet une **gestion sécurisée et centralisée** des autorisations d’accès.
* Facilite le travail à distance si les permissions sont configurées.
* Décharge les postes de travail et optimise l’espace réseau.

### **2. Scale-Out File Server (SOFS)**

* Permet de **regrouper plusieurs serveurs dans un cluster actif-actif**.
* Avantages :

  * Augmente la puissance et la bande passante disponible.
  * Optimise les coûts matériels en ajoutant simplement des serveurs au cluster.
  * Permet à tous les utilisateurs d’accéder aux fichiers simultanément.
* Inspiré de Hyper-V, fonctionnel depuis Windows Server 2012.

### **3. Pool de stockage**

* Rassemble plusieurs disques physiques en **disques logiques**.
* Avantages :

  * Capacité évolutive et flexible.
  * Protection automatique des données (réplication, tolérance aux pannes).
  * Permet d’utiliser des disques de capacités différentes.

### **4. Système de fichiers ReFS (Resilient File System)**

* Système de fichiers **résilient**, détecte et corrige les corruptions.
* Optimisé pour la **protection des données et l’intégrité**.
* Ne permet pas de modifier la taille d’unité d’allocation par défaut.

### **5. Stratégie d’accès centralisé**

* Gère les autorisations selon le **niveau hiérarchique et les rôles**.
* Vérifie les revendications des utilisateurs et périphériques.
* Permet de sécuriser les informations sensibles et d’assurer la traçabilité.

---
</details>
<details>
<summary>

## **Méthodes et procédures**
</summary>

### **1. Configuration d’un disque et d’un volume simple**

1. **Gestion du disque** : clic droit sur barre Windows → `Gestion du disque`.
2. Sélectionner le **disque non alloué** → `Nouveau volume simple`.
3. **Assistant Création de volume simple** :

   * Spécifier la taille du volume → par défaut.
   * Attribuer une lettre de lecteur → par défaut ou personnalisé (ex: F).
   * Formater la partition et nommer le volume → ex: `Fichier-SRV`.
4. Vérifier dans la **Gestion des disques** que le volume est créé.

### **2. Création d’un volume via Services de fichiers et stockage**

1. Dans `Services de fichiers et de stockage` → `Disques` → clic droit → `Nouveau volume`.
2. Sélectionner le disque configuré → Suivant.
3. Spécifier la taille du volume → par défaut.
4. Affecter le volume à une lettre ou un dossier → ex: E.
5. Paramètres système de fichiers → nommer le volume → valider → `Suivant`.
6. Vérifier les paramètres → cliquer sur `Créer` → Fermer.

### **3. Création d’un pool de stockage**

1. `Gestionnaire de serveur` → `Serveurs` → `Pools de stockage`.
2. Clic droit → `Nouveau pool de stockage`.
3. Nommer le pool → Suivant.
4. Sélectionner les disques physiques pour le pool → Laisser sur `Automatique`.
5. Vérifier les paramètres → `Créer` → Fermer.

### **4. Mise en place d’un système de fichiers ReFS**

1. `Services de fichiers et stockage` → `Disques` → clic droit → `Nouveau volume`.
2. Sélectionner le serveur/disque du pool → Suivant.
3. Définir la taille du volume → Suivant.
4. Affecter le volume à une lettre ou un dossier → ex: E.
5. Paramètres système de fichiers → sélectionner **ReFS**, nommer le volume → Suivant.
6. Vérifier → `Créer` → Fermer.

---
</details>
<details>
<summary>

## **Commandes et vérifications utiles**
</summary>

* **PowerShell pour vérifier les volumes :**

```powershell
Get-Volume
```

* **Vérifier les pools de stockage :**

```powershell
Get-StoragePool
```

* **Vérifier les disques physiques :**

```powershell
Get-PhysicalDisk
```

* **Créer un volume dans un pool via PowerShell :**

```powershell
New-Volume -StoragePoolFriendlyName "Primordial" -FriendlyName "Fichier-Stock" -FileSystem ReFS -Size 100GB
```

* **Vérifier le système de fichiers d’un volume :**

```powershell
Get-Volume | Format-Table DriveLetter, FileSystem, Size, HealthStatus
```

---
</details>
<details>
<summary>

## **Résumé pratique**
</summary>

* **Disque → Volume simple → Volume assigné** → stockage de données.
* **Pools de stockage** : regroupement flexible et protection des données.
* **ReFS** : résilience et intégrité.
* **SOFS et accès centralisé** : performance, scalabilité et sécurité des accès.

---
</details>