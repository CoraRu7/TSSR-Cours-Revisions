# ğŸ§  Fiche : IPv6

### ğŸ¯ Objectif

Comprendre **IPv6**, ses **adresses**, son fonctionnement, la **configuration automatique**, et la distinction entre les diffÃ©rents **types dâ€™adresses**.

---

## ğŸ”¹ 1. Introduction Ã  IPv6

* **IPv6 (Internet Protocol version 6)** : successeur dâ€™IPv4 pour pallier le manque dâ€™adresses.
* Adresses sur **128 bits** â†’ espace dâ€™adressage immense (2^128 â‰ˆ 340 sextillions).
* Fonctionne Ã  la **couche 3 OSI**, protocole sans connexion.
* **Sous-rÃ©seaux IPv6** = 64 bits (fixes), contrairement Ã  IPv4.
* Facilite **lâ€™auto-configuration**, **lâ€™agrÃ©gation des routes**, et supprime la nÃ©cessitÃ© du NAT.
* **Double pile IPv4/IPv6** durant la transition ; tunnels possibles pour compatibilitÃ©.

---

## ğŸ”¹ 2. Notation et structure dâ€™une adresse IPv6

* Ã‰criture hexadÃ©cimale, 8 groupes de 16 bits (2 octets par groupe) sÃ©parÃ©s par `:`.
  Exemple :
  `2001:0db8:0000:85a3:0000:0000:ac1f:8001` â†’ compressÃ© : `2001:db8:0:85a3::ac1f:8001`

* **Compression des zÃ©ros** :

  * Supprimer les zÃ©ros non significatifs dans un groupe.
  * `::` remplace **une ou plusieurs sÃ©ries de groupes Ã  0 consÃ©cutifs**.

* **Adresse = PrÃ©fixe rÃ©seau (64 bits) + Identifiant dâ€™interface (64 bits)**.

  * Lâ€™ID dâ€™interface peut Ãªtre gÃ©nÃ©rÃ© via **MAC (EUI-64)** ou manuellement.

---

## ğŸ”¹ 3. Identification dâ€™interface (EUI-64)

1. DÃ©couper lâ€™adresse MAC (48 bits) en 2 parties.
2. InsÃ©rer le **FFFE** au milieu â†’ forme 64 bits.
3. Inverser le **7e bit** (â€œuniversel/localâ€) pour indiquer unicitÃ© globale ou locale.

Exemple :
MAC `00-13-28-60-C1-4C` â†’ `0013:28FF:FE60:C14C` â†’ inverser 7e bit â†’ `0213:28FF:FE60:C14C`.

---

## ğŸ”¹ 4. Protocole Neighbor Discovery (ND)

* Remplace **ARP** â†’ pas de broadcast.

* BasÃ© sur **ICMPv6**.

* Fonctions :

  * DÃ©tection dâ€™adresses en double
  * DÃ©couverte des voisins
  * Annonce des adresses link-local
  * RÃ©solution dâ€™adresses

* **Processus de dÃ©tection de doublons** :

  1. `Neighbor Solicitation` â†’ vÃ©rifier si une adresse est dÃ©jÃ  utilisÃ©e.
  2. `Neighbor Advertisement` â†’ confirmer lâ€™usage si pas de rÃ©ponse.

---

## ğŸ”¹ 5. PrÃ©fixe de routage et CIDR IPv6

* Notation **CIDR** = `adresse/prefix-length` (`/n` bits pour le rÃ©seau).
  Exemple : `2001:0820:9511::/48` â†’ sous-rÃ©seau de `2001:0820:9511:0000:...` Ã  `2001:0820:9511:FFFF:...`.

* **PrÃ©fixe rÃ©seau** : partie haute de lâ€™adresse.

* **PrÃ©fixe sous-rÃ©seau** : partie basse utilisÃ©e pour diviser le rÃ©seau.

---

## ğŸ”¹ 6. Types dâ€™adresses IPv6

| Type                        | Description                                                         | PrÃ©fixe                            |
| --------------------------- | ------------------------------------------------------------------- | ---------------------------------- |
| **Lien-local (link-local)** | Communique uniquement sur le rÃ©seau local.                          | `FE80::/10`                        |
| **Unicast global**          | Adresse unique mondiale, routable Internet.                         | `2000::/3` (souvent `2001::`)      |
| **Multicast**               | Communication dâ€™un Ã  plusieurs membres dâ€™un groupe.                 | `FF00::/8`                         |
| **Anycast**                 | Adresse assignÃ©e Ã  un groupe, le paquet va Ã  lâ€™hÃ´te le plus proche. | DÃ©ployÃ©e sur sous-rÃ©seaux spÃ©ciaux |

---

## ğŸ”¹ 7. En-tÃªte IPv6

* **SimplifiÃ© par rapport Ã  IPv4**, longueur fixe = 40 octets.
* Champs essentiels :

| Champ               | Fonction                                           |
| ------------------- | -------------------------------------------------- |
| Version             | IPv6                                               |
| Traffic Class       | PrioritÃ© (8 bits)                                  |
| Flow Label          | Identifie flux pour traitement identique (20 bits) |
| Payload Length      | Longueur des donnÃ©es (16 bits)                     |
| Next Header         | Protocole de la couche supÃ©rieure (8 bits)         |
| Hop Limit           | Nombre max de sauts (8 bits)                       |
| Source Address      | Adresse de lâ€™expÃ©diteur (128 bits)                 |
| Destination Address | Adresse du destinataire (128 bits)                 |

* Options supplÃ©mentaires dans **en-tÃªtes dâ€™extension**.

---

### âš ï¸ Rappels

* IPv6 supprime NAT, simplifie le routage et offre sÃ©curitÃ© native.
* Les adresses sont **auto-configurables**, mais peuvent Ãªtre fixÃ©es manuellement.
* ND remplace ARP pour la rÃ©solution et la dÃ©couverte des voisins.

---