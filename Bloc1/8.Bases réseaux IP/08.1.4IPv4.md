# Fiche : Le dÃ©coupage dâ€™un rÃ©seau IPv4

### ğŸ¯ Objectif

Comprendre **IPv4**, les **masques/CIDR**, la **sÃ©paration rÃ©seau/hÃ´te**, et **dÃ©couper** un rÃ©seau en sous-rÃ©seaux (taille fixe ou Ã©quitable).

---

## ğŸ”¹ Quâ€™est-ce que lâ€™IPv4 ?

* **IPv4** = *Internet Protocol version 4*. Adresse codÃ©e sur **32 bits**, prÃ©sentÃ©e en quatre octets dÃ©cimaux sÃ©parÃ©s par des points (ex. `193.63.52.87`).
* Chaque **interface rÃ©seau** dÃ©tient au moins une adresse IPv4. Attribution : manuelle ou via **DHCP**.
* Certaines adresses sont **rÃ©servÃ©es** (ex. `127.0.0.1` boucle locale, `0.0.0.0` route par dÃ©faut).
* **Adresses privÃ©es** (non routables sur Internet) courantes :

  * Classe A : `10.0.0.0/8`
  * Classe B : `172.16.0.0/12`
  * Classe C : `192.168.0.0/16`

---

## ğŸ”¹ Masque de sous-rÃ©seau & CIDR

* Masque = 32 bits aussi, indique la frontiÃ¨re **rÃ©seau | hÃ´te**. Ex : `255.255.254.0`.
* **CIDR** : notation `/n` oÃ¹ `n` = nombre de bits Ã  1 dans le masque. Ex : `255.255.224.0` = `/19` (19 bits Ã  1).
* **But** : identifier la NetID (adresse rÃ©seau) et la partie hÃ´te.

---

## ğŸ”¹ OpÃ©rations frÃ©quentes (mÃ©thodes)

### 1) DÃ©terminer NetID Ã  partir dâ€™une adresse /CIDR

* Ã‰crire adresse et masque en binaire, appliquer un **ET** bit Ã  bit â†’ NetID.
* Exemple : `172.20.56.128 /23` â†’ masque `255.255.254.0`

  * NetID = `172.20.56.0`
  * Broadcast = `172.20.57.255`
  * First host = `172.20.56.1` ; Last host = `172.20.57.254`

### 2) Nombre dâ€™hÃ´tes utilisables

* Formule : `2^(nombre de bits Ã  0) - 2` (on retire NetID + Broadcast).
* Ex : `/23` â†’ bits Ã  0 = `32-23 = 9` â†’ `2^9 - 2 = 512 - 2 = 510` hÃ´tes.

### 3) Trouver NetID/Broadcast par mÃ©thode du "nombre magique"

* Sur lâ€™octet significatif du masque, calculer `256 - valeur_octet` â†’ pas (magic).
* Ex : `/20` â†’ masque `255.255.240.0` â†’ `256 - 240 = 16` â†’ les sous-rÃ©seaux avancent par pas de 16 dans le troisiÃ¨me octet.

---

## ğŸ”¹ Exemple complet de dÃ©coupage (illustration pratique)

**Contexte** : rÃ©seau `192.168.180.0/20`. Besoins : 320 techniciens, 140 commerciaux, 15 directeurs.

1. `/20` â†’ masque `255.255.240.0` â†’ NetID calculÃ©e = `192.168.176.0` (multiple de 16 â‰¤ 180).

   * Broadcast = `192.168.191.255`.
   * CapacitÃ© totale = `2^(32-20) - 2 = 2^12 - 2 = 4096 - 2 = 4094` hÃ´tes (suffisant).

2. **Techniciens (320 hÃ´tes)**

   * Choix PDU : `2^9 - 2 = 510` â†’ suffisant â†’ masque `/23` (`255.255.254.0`).
   * NetID = `192.168.176.0` ; Broadcast = `192.168.177.255` ; hosts = `192.168.176.1` â†’ `192.168.177.254`.

3. **Commerciaux (140 hÃ´tes)**

   * `2^8 - 2 = 254` â†’ masque `/24` (`255.255.255.0`).
   * NetID = `192.168.178.0` ; Broadcast = `192.168.178.255` ; hosts = `192.168.178.1` â†’ `192.168.178.254`.

4. **Directeurs (15 hÃ´tes)**

   * `2^5 - 2 = 30` â†’ masque `/27` (`255.255.255.224`).
   * NetID = `192.168.179.0` ; Broadcast = `192.168.179.31` ; hosts = `192.168.179.1` â†’ `192.168.179.30`.

---

## ğŸ”¹ DÃ©couper Ã©quitablement (ex. rÃ©seau /24 â†’ 2 sous-rÃ©seaux)

* RÃ©seau : `192.168.1.0/24`. On veut 2 sous-rÃ©seaux â†’ `2^1` â†’ ajouter 1 bit au masque â†’ `/25` (`255.255.255.128`).
* RÃ©sultat :

  * Sous-rÃ©seau 1 : `192.168.1.0/25` â†’ Broadcast `192.168.1.127` â†’ hÃ´tes `.1` â†’ `.126` (126 hÃ´tes).
  * Sous-rÃ©seau 2 : `192.168.1.128/25` â†’ Broadcast `192.168.1.255` â†’ hÃ´tes `.129` â†’ `.254` (126 hÃ´tes).

---

## âš ï¸ Rappels & bonnes pratiques

* **NetID** (adresse rÃ©seau) et **Broadcast** ne sont pas attribuables aux hÃ´tes.
* Toujours vÃ©rifier si une adresse fait partie des **plages privÃ©es** avant lâ€™attribution.
* Utiliser NAT/PAT lorsque lâ€™on veut exposer un rÃ©seau privÃ© vers Internet avec peu dâ€™adresses publiques.
* Plusieurs mÃ©thodes de calcul existent (binaire, tableau de puissances, nombre magique) â€” choisis celle que tu maÃ®trises le mieux.

---