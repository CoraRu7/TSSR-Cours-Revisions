# Administrer des machines virtuelles avec SCVMM

## Contexte

System Center Virtual Machine Manager (SCVMM) est un outil de Microsoft permettant de centraliser la gestion de la virtualisation.
Il supporte plusieurs technologies : Hyper-V, VMware et Citrix. SCVMM simplifie :

* La création et le déploiement des machines virtuelles (VM).
* La gestion des ressources physiques et virtuelles (CPU, RAM, stockage).
* L’automatisation des tâches et le contrôle de l’infrastructure virtuelle.

---

## I) Configuration des machines virtuelles avec SCVMM

### 1. Définitions et principes

**SCVMM** :

* Outil centralisé pour créer, configurer, modifier et gérer les VM.
* Gestion efficace des ressources : mémoire, processeurs, stockage et réseau.
* Permet l’automatisation et le déploiement rapide via des modèles prédéfinis.

**Avantages** :

* Centralisation des configurations.
* Déploiement rapide et cohérent des VM.
* Gestion des profils de configuration pour la conformité et la sécurité.
* Surveillance et ajustement des performances en temps réel.

---

### 2. Méthode de configuration des machines virtuelles

**Étapes principales** :

1. Préparer l’environnement (hôtes Hyper-V, réseau virtuel, ressources matérielles).
2. Installer SCVMM et ses dépendances (SQL Server, SSMS, SDK).
3. Connecter SCVMM à votre infrastructure Hyper-V.
4. Créer des bibliothèques centralisant modèles, pilotes et ressources.
5. Créer des modèles de VM avec OS, stockage, mémoire et réseau.
6. Surveiller et gérer continuellement les performances et la conformité.

---

### 3. Création, modification et suppression des VM

**Créer une VM** :

* Sélectionner un modèle de VM.
* Attribuer un nom, un OS, de la mémoire et du stockage.
* Finaliser la création via l’assistant SCVMM.

**Modifier une VM** :

* Ajuster mémoire, CPU, réseau ou autres paramètres.
* Appliquer les modifications.

**Supprimer une VM** :

* Sélectionner la VM et suivre les étapes de suppression.
* Attention à la gestion des ressources partagées pour ne pas impacter d’autres VM.

---

### 4. Démonstration vidéo (SCVMM 2019/2022)

* Installation préalable de SQL Server 2017 et SSMS.
* Téléchargement et installation des modules SCVMM depuis Microsoft Download.
* Configuration de la base de données VMMDB.
* Lien avec l’infrastructure Hyper-V pour gestion centralisée.

---

## II) Administration des hôtes Hyper-V avec SCVMM

### 1. Ajouter et configurer un hôte Hyper-V

**Étapes** :

1. Ouvrir la console SCVMM.
2. Ajouter un hôte Hyper-V via la section « Hôte ».
3. Attribuer l’adresse IP.
4. Configurer les informations d’identification et groupe de travail.
5. Finaliser l’ajout et intégrer l’hôte au pool de ressources.

**Conseils** :

* Utiliser des comptes d’administration pour garantir les droits nécessaires.
* Vérifier la compatibilité de la version Hyper-V avec SCVMM.
* Effectuer des sauvegardes régulières de la configuration.

---

### 2. Gestion des ressources matérielles

**Ressources gérées** : processeur, mémoire, stockage.

**Méthodes** :

* **Processeur** : allouer les cœurs virtuels selon la charge de la VM.
* **Mémoire** : répartir la RAM selon les besoins des VM.
* **Stockage** : créer des espaces de stockage virtuels pour héberger les VM.

**Conseils de performance** :

* Surveiller les performances en continu.
* Ajuster proactivement les ressources selon les besoins.
* Répartir équitablement les VM sur plusieurs hôtes.
* Automatiser les tâches pour réduire les erreurs humaines.

**Exemples concrets** :

* Base de données : ≥ 4 cœurs CPU.
* Site web à fort trafic : ≥ 8 Go RAM.
* Gestion des transactions : allouer suffisamment de CPU pour traitement efficace.

---

## III) L’essentiel

* SCVMM est indispensable pour la **gestion centralisée des machines virtuelles**.
* Permet d’**optimiser l’utilisation des ressources**, de **surveiller la virtualisation** et de **garantir la conformité** des configurations.
* Les fonctionnalités clés incluent :

  * Bibliothèques et modèles de VM.
  * Surveillance et gestion des performances en temps réel.
  * Automatisation des tâches pour gagner du temps et réduire les erreurs.

---