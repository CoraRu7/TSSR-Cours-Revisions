# **Gérer des machines virtuelles avec vCenter Server**

### **Objectif :**

À l’issue de cette fiche, vous serez capable de :

* Paramétrer et gérer des hôtes ESXi dans vCenter.
* Déployer, configurer et migrer des machines virtuelles depuis vCenter.
* Surveiller les performances, gérer les ressources et créer des alarmes.
* Comprendre l’importance de vCenter pour la gestion centralisée et la haute disponibilité.

---

## **Concepts clés**

### **1. Gestion des hôtes avec vCenter Server**

* **ESXi :** hyperviseur de type 1 installé sur le matériel physique.
* **vCenter Server :** plateforme centralisée pour gérer plusieurs hôtes ESXi, clusters, VM, stockage et réseau.

**Réseau :**

* **vSphere Standard Switch (vSS)** : switch virtuel indépendant pour chaque ESXi.

  * *vSwitch0* : switch par défaut pour management et VM.
* **Cartes réseau :**

  * pNIC = physique
  * vmNIC = virtuelle associée à pNIC
  * vNIC = pour VM
* **Groupements de ports :**

  * *VM Kernel* : pour gestion ESXi, vMotion, provisionnement, etc.
  * *VM Network* : réseau VM (VLANs configurés si nécessaire).

**Stockage :**

* Local → limité, non mutualisé.
* Centralisé/Mutualisé → via SAN ou NAS, recommandé pour HA et vMotion.
* **Composants :** adaptateurs de stockage, HBA, iSCSI initiator/target, LUN, datastore VMFS ou NFS.

**Gestion des ressources :**

* Mémoire et CPU : réservation, limite, parts, ajout à chaud.
* Pools de ressources : regroupement logique de VM pour gestion simplifiée.
* **Clusters :** permettent DRS, HA, EVC, VSAN.

**Surveillance :**

* Création d’alarmes sur VM, hôtes ou datastores.
* Règles : conditions (IF), actions (alerte, mail, script, migration automatique).

---

### **2. Gestion des machines virtuelles**

* **Création / modification / suppression :**

  * À partir de fichier ISO ou modèles (VMTX, OVF).
  * **VMTX :** templates internes pour OS et correctifs, personnalisables.
  * **OVF :** standard, interopérable avec d’autres hyperviseurs.
* **Actions possibles :** cloner, convertir en template, déployer depuis template.
* **Configuration :** allocation CPU/mémoire, stockage, réseau.
* **Migration (vMotion) :**

  * Migration à chaud VM entre hôtes ESXi.
  * Migration stockage vers SAN/LUN centralisé.
  * Migration ressource de calcul sur un autre ESXi.

---

### **3. L’essentiel**

* **vCenter = centralisation et optimisation de la gestion VMware.**
* Avantages :

  * Gestion centralisée des ESXi et VM.
  * Clusters et répartition automatique de charge (DRS).
  * Haute disponibilité (vSphere HA).
  * Migration à chaud VM et stockage.
  * Gestion avancée du réseau et du stockage.

---

### **Commandes / Notes importantes**

* Activer SSH et ESXi Shell : pour administration avancée.
* Configurer management network : IP, DNS, hostname, domaine (ex. `tssr.local`).
* Créer alarme : `Configurer → Définition des alarmes → Ajouter → Cible → Règle IF → Actions`.
* Déployer VM depuis template : `Bibliothèque → Cloner → Déployer → Sélection hyperviseur/cluster`.

---

### **Liens / Ressources**

* VMware Documentation : [https://docs.vmware.com](https://docs.vmware.com)
* vSphere Networking Guide
* vSphere Storage Guide
* Vidéos de procédure dans le cours (création VM, migration vMotion, alarme).

---