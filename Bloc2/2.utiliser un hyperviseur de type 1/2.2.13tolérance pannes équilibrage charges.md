# **Tolérance de pannes et équilibrage de charge avec Proxmox VE**

## **Objectif**

Assurer la continuité des services et l’optimisation des ressources dans un environnement virtualisé en utilisant Proxmox VE, via la création de clusters, la synchronisation des VM, les mises à jour et le clonage.

---

## **Concepts clés**

### **1. Tolérance aux pannes**

* Capacité d’un système à **continuer à fonctionner malgré un dysfonctionnement** d’un ou plusieurs composants.
* Réduction des interruptions de services pour les utilisateurs.
* Historique : initialement, intervention humaine nécessaire → aujourd’hui, systèmes autonomes pour gérer les incidents non critiques.

### **2. Datacenter et cluster**

* **Datacenter** : unité de gestion centralisée regroupant nœuds et VM.
* **Cluster** : ensemble de serveurs/nœuds interconnectés pour **ressources partagées, haute disponibilité et répartition de charge**.
* Chaque nœud = machine indépendante pouvant héberger VM.
* Avantages : haute disponibilité, gestion centralisée, synchronisation simplifiée, évolutivité.

---

### **3. Création d’un cluster Proxmox**

#### Méthode

1. Dans **Datacenter → Cluster → Create Cluster**.
2. Nommer le cluster (ex. SRV-Cluster).
3. Saisir éventuellement l’IP du serveur → **Create**.
4. Vérifier le message « OK » → cluster créé.

#### Synchronisation des VM

* **Première VM** : Datacenter → Cluster → **Join Information** → copier code.
* **Deuxième VM** : Datacenter → Cluster → **Join Cluster** → coller code, entrer mot de passe → VM synchronisée.

---

### **4. Mise à jour de Proxmox**

1. Accéder au **Datacenter → Updates**.
2. Vérifier les mises à jour en attente.
3. Cliquer sur **Upgrade** pour appliquer toutes les mises à jour.
4. Confirmer avec **Y**, quitter avec **Q**.

* Maintenir le serveur à jour = sécurité + compatibilité + stabilité.

---

### **5. Clonage de VM**

1. Démarrer la VM à cloner → clic droit → **Start**.
2. Clic droit → **Clone** → définir nom (ex. Clone Debian) et pool de ressources → **Clone**.
3. Vérifier que la VM clonée apparaît dans le Datacenter.

* Éviter de donner le même nom que la VM source.
* Utilité : déploiement rapide, test modifications sans impacter VM originale.

---

### **6. Avantages clés**

* **Clusters** : ressources partagées, tolérance aux pannes, haute disponibilité.
* **VM et clonage** : tester OS et modifications sans risque.
* **Mises à jour régulières** : sécurité et stabilité de l’infrastructure.
* **Tolérance aux pannes** : continuité des services sans intervention utilisateur.

---

## **Commandes utiles**

```bash
# Mettre à jour Proxmox
apt update && apt full-upgrade

# Démarrer une VM
qm start <VMID>

# Cloner une VM
qm clone <VMID> <NewVMID> --full
```

---

### **Résumé**

* **Tolérance aux pannes** = fonctionnement continu malgré défaillances.
* **Cluster Proxmox** = regroupement de nœuds pour haute disponibilité et load balancing.
* **Mises à jour régulières** = stabilité et sécurité.
* **Clonage VM** = déploiement rapide et test sécurisé.

---