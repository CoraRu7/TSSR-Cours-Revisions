**¬´ Intervenir sur une infrastructure √† cl√©s publiques (PKI) ¬ª**

---

## üß© **Titre :** Intervenir sur une infrastructure √† cl√©s publiques (PKI)

---

### üéØ **Objectif du cours :**

Comprendre le r√¥le, le fonctionnement et la mise en ≈ìuvre d‚Äôune **infrastructure √† cl√©s publiques (PKI)** afin d‚Äôassurer la **s√©curisation, l‚Äôauthentification et le chiffrement** des communications dans un environnement r√©seau.

---

### üß† **Concepts cl√©s :**

* **PKI (Public Key Infrastructure)** : syst√®me permettant d‚Äôassocier une **cl√© publique** √† une **identit√© v√©rifi√©e** gr√¢ce √† un **certificat num√©rique**.
* **Cl√©s asym√©triques** :

  * **Cl√© publique** : utilis√©e pour chiffrer les donn√©es.
  * **Cl√© priv√©e** : utilis√©e pour les d√©chiffrer.
* **Autorit√© de certification (CA)** : entit√© de confiance qui signe et d√©livre les certificats num√©riques.
* **Certificat num√©rique** : document √©lectronique liant une cl√© publique √† une entit√© (utilisateur, machine, logiciel‚Ä¶).
* **SSL/TLS** : protocoles assurant la **s√©curit√© des communications** sur Internet via certificats.
* **Certificats SSL** :

  * **DV (Domain Validation)** : v√©rifie le propri√©taire du domaine (s√©curit√© basique).
  * **OV (Organization Validation)** : v√©rifie l‚Äôexistence l√©gale de l‚Äôentreprise.
  * **EV (Extended Validation)** : v√©rifie en profondeur l‚Äôorganisation, plus co√ªteux mais plus s√ªr.
* **HTTPS** : version s√©curis√©e de HTTP, utilisant SSL/TLS pour chiffrer la connexion.
* **Let's Encrypt** : autorit√© de certification gratuite pour g√©n√©rer des certificats SSL/TLS.
* **Certificat auto-sign√©** : g√©n√©r√© manuellement, non reconnu publiquement mais utile en environnement priv√©.

---

### üß© **Fonctionnement g√©n√©ral de la PKI :**

1. **L‚Äôutilisateur** ou l‚Äôappareil g√©n√®re une paire de cl√©s (publique/priv√©e).
2. La **cl√© publique** est envoy√©e √† une **autorit√© de certification (CA)**.
3. La CA v√©rifie l‚Äôidentit√© du demandeur, signe la cl√© publique et d√©livre un **certificat**.
4. Ce certificat permet d‚Äô**authentifier** l‚Äôentit√© et de **s√©curiser les √©changes** (via HTTPS, VPN, etc.).
5. Lors d‚Äôune connexion :

   * Le client re√ßoit le certificat du serveur.
   * Il v√©rifie sa validit√© et l‚Äôidentit√© associ√©e.
   * Si la v√©rification r√©ussit, la connexion chiffr√©e s‚Äô√©tablit.

---

### üíª **Exemple pratique : chiffrement asym√©trique avec GnuPG (Linux Debian 10)**

#### üßæ Pr√©-requis :

Installer le paquet :

```bash
sudo apt-get install gpg
```

#### üß© √âtapes :

1. **G√©n√©ration d‚Äôune cl√© :**

   ```bash
   sudo gpg --full-gen-key
   ```

   ‚Üí R√©pondre aux questions et d√©finir une **phrase secr√®te**.

2. **Localisation des cl√©s :**

   * Les cl√©s se trouvent dans `~/.gnupg/`

3. **Exporter la cl√© publique :**

   ```bash
   sudo gpg --armor --output pubkey.txt --export [uid]
   ```

4. **Afficher le contenu de la cl√© :**

   ```bash
   cat pubkey.txt
   ```

5. **Importer la cl√© publique sur une autre machine :**

   ```bash
   sudo gpg --import pubkey.txt
   ```

6. **Chiffrer un message :**

   ```bash
   sudo gpg --encrypt --recipient [Nom] Bonjour
   ```

7. **D√©chiffrer le message :**

   ```bash
   sudo gpg --output Bonjour.txt --decrypt Bonjour.gpg
   ```

8. **V√©rification :**

   ```bash
   sudo nano Bonjour.txt
   ```

   ‚Üí Si le texte est lisible, le d√©chiffrement est r√©ussi ‚úÖ

---

### üîê **Principe de fonctionnement global :**

1. Le client demande √† se connecter √† un serveur s√©curis√©.
2. Le serveur envoie son certificat au client.
3. Le client v√©rifie que le certificat est **valide et sign√© par une autorit√© de confiance**.
4. Si oui ‚Üí une session **chiffr√©e et authentifi√©e** s‚Äô√©tablit.
5. Sinon ‚Üí la connexion est refus√©e (message d‚Äôavertissement du navigateur).

---

### üß≠ **Autorit√©s de certification (CA) :**

* **R√¥le :** d√©livrer et signer des certificats.
* **Types :**

  * Payantes : (ex. DigiCert, GlobalSign)
  * Gratuites : (ex. Let‚Äôs Encrypt)
* **Certificat racine :** utilis√© pour cr√©er des certificats interm√©diaires et renforcer la cha√Æne de confiance.

---

### üß± **Commandes / Notes :**

| Action                    | Commande                                              |
| ------------------------- | ----------------------------------------------------- |
| Installer GnuPG           | `sudo apt-get install gpg`                            |
| G√©n√©rer une cl√©           | `sudo gpg --full-gen-key`                             |
| Exporter cl√© publique     | `sudo gpg --armor --output pubkey.txt --export [uid]` |
| Importer une cl√© publique | `sudo gpg --import pubkey.txt`                        |
| Chiffrer un message       | `sudo gpg --encrypt --recipient [Nom] fichier.txt`    |
| D√©chiffrer un message     | `sudo gpg --output fichier.txt --decrypt fichier.gpg` |
| Voir les fichiers cach√©s  | `ls -al`                                              |

---

### üîó **Liens utiles :**

* [Let‚Äôs Encrypt ‚Äì Certificats SSL gratuits](https://letsencrypt.org)
* [linuxtricks.fr ‚Äì Cr√©ation de certificats SSL auto-sign√©s](https://www.linuxtricks.fr)
* [Documentation GnuPG officielle](https://gnupg.org/documentation/)

---