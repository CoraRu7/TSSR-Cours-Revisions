# Mise en place d’une DMZ

## I) Introduction

### Contexte

* Une **DMZ** (zone démilitarisée) est utilisée pour **séparer le réseau interne d’une organisation du réseau externe (Internet)**.
* Les services publics accessibles depuis Internet (serveurs web, serveurs de messagerie, etc.) sont placés dans la DMZ.
* Le réseau interne reste isolé et sécurisé.
* **Avantage principal** : en cas de violation, seuls les serveurs de la DMZ sont compromis, protégeant les données sensibles du LAN.

### Services typiques en DMZ

* Serveurs web publics
* Front-end d’applications (le back-end reste derrière le LAN)
* Serveurs de messagerie
* Services d’authentification
* Services sécurisés (HTTP, SMTP, FTP, Telnet)
* Serveurs VoIP
* Passerelles d’applications
* Serveurs de test

---

## II) Mise en place de l’atelier

### Prérequis

* VirtualBox
* VM PfSense fonctionnelle
* 3 interfaces réseau : WAN, LAN, DMZ

### Configuration des interfaces réseau sous VirtualBox

1. **WAN** : Mode « Accès par pont » (connexion à Internet de la machine hôte)
2. **LAN** : Réseau interne (« Internal Network »)
3. **DMZ** : Réseau interne (« Internal Network »)
4. **Options avancées** :

   * Type d’interface : par défaut OK
   * Mode Promiscuité : « Tout autoriser » (non critique pour ce cours)
   * Adresse MAC : générée aléatoirement ou manuellement
   * Câble branché : activé

**Résumé configuration des interfaces :**

| Interface | Mode           | Réseau interne |
| --------- | -------------- | -------------- |
| WAN       | Accès par pont | –              |
| LAN       | Réseau interne | LAN            |
| DMZ       | Réseau interne | DMZ            |

---

## III) Configuration de la DMZ sur PfSense

### Étapes

1. Démarrer la VM PfSense et accéder à l’interface web depuis une VM cliente :

   * URL : l’IP affichée sur PfSense
   * Identifiants par défaut : `admin / pfsense`
2. Aller dans **Interfaces → Assignments**
3. Cliquer sur **Add** pour créer l’interface OPT1
4. Cliquer sur **OPT1** pour configurer :

   * Cocher **Enable interface**
   * Nommer l’interface : **DMZ**
   * Type d’IP : **Static IPv4**
   * Définir l’adresse IP et le masque de sous-réseau
   * Cliquer sur **Save**, puis **Apply Changes**
5. Vérifier que l’interface DMZ est active

---

### Conclusion

La DMZ est désormais configurée et fonctionne comme un réseau isolé entre le LAN et Internet.
Les serveurs hébergés dans la DMZ seront accessibles depuis Internet, tandis que le LAN interne reste protégé derrière le firewall.

---